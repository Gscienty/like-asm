#like asm 手册
游戏中有一个虚拟的CPU，玩家所撰写的代码将运行在这台虚拟CPU之中。  
游戏提供给玩家一个64KB的内存，但对于内存单元，只能通过一对取/存指令来进行操作，而不能直接参与相关的运算。  
正如冯·诺依曼体系中描述的一样，玩家所编写的指令与存储的数据都在一块内存内，因此在存储数据时千万注意不要覆盖掉您的代码。  
在本游戏中，对于内存的管理的策略是**绝对装入方式**。 代码部分是从内存的0000h处开始装入的。

在游戏中，每一关任务都会提供给玩家一组数据，包含多个输入/输出对，玩家需要猜测出每个输入/输出对的关系，并通过我们提供给您的指令集来实现它。 每进行测试一个输入/输出对时，CPU会重置为初始状态（但内存不会有任何变动）

游戏会根据你对CPU寄存器使用情况、内存使用情况、相关算数逻辑单元的使用情况、指令执行次数做一个统计，用于通关评分的依据。

##CPU相关寄存器
在本游戏中，CPU的寄存器是仅能参与运算的数据存储模块，所有运算的算元与结果都仅能直接从中读取或直接存入。

在CPU中，有四个通用寄存器，分别为**ax**,**bx**,**cx**,**dx**。这四个通用寄存器主要是用来存储计算过程中的参与运算的数字。  
其中任意一个寄存器容量都为4Byte  
有一个栈顶指针寄存器**sp**，用于存储栈顶的内存地址，内存中的栈区域广泛应用于函数调度等诸多领域。（暂无用）  
一个程序计数器**pc**，用于记录当前需运行指令的内存地址。（玩家也瞅不见）
一个程序状态字**psw**，用于记录运算过程中的一些状态。  
一个**input**寄存器，该寄存器仅能读取，即读取测试输入/输出对中的输入数据  
一个**output**寄存器，该寄存器仅能写入，即将程序运行得到的结果写入该寄存器中

这里要特别的讲一下程序状态字psw。  
在每次运算过后，程序状态字都会根据运算的结果产生相应的变化。  
程序状态字由一个字节组成，其中每一位都代表了对于运算结果的性质的描述。以下是每一位的意义：

OF 溢出 10 |SF 符号 20 |ZF 零 40 |CF 进位 80 |AF 扩充 01 |PF 奇偶 02

##指令集

###立即数
即程序中直接存在的十六进制数，在指令中表示立即数必须要加#作为前缀。

###加法指令
该指令影响psw
加法指令包含六种形式。分别以及对应的操作为：

1. add 寄存器 两位立即数，其功能为: 寄存器 + 两位立即数 -> 寄存器，参与计算的均为1Byte数据，例: add ax #01 或 add ax #fa  
2. add 寄存器 四位立即数，其功能为：寄存器 + 四位立即数 -> 寄存器，参与计算的均为2Byte数据，例：add ax #0001 或 add ax #1234  
3. add 寄存器 八位立即数，其功能为：寄存器 + 八位立即数 -> 寄存器，参与计算的均为4Byte数据，例：add ax #00000001 或 add ax #12345678
4. add 寄存器A 寄存器B，其功能为：寄存器A + 寄存器B -> 寄存器A，参与计算的均为1Byte数据，例：add ax bx
5. addh 寄存器A 寄存器B，其功能为：寄存器A + 寄存器B -> 寄存器A，参与计算的均为2Byte数据，例：addh ax bx
6. addw 寄存器A 寄存器B，其功能为：寄存器A + 寄存器B -> 寄存器A，参与计算的均为4Byte数据，例：addw ax bx

###减法指令
该指令影响psw
减法指令包含六种形式。分别以及对应的操作为：

1. sub 寄存器 两位立即数，其功能为: 寄存器 - 两位立即数 -> 寄存器，参与计算的均为1Byte数据，例: sub ax #01 或 sub ax #fa  
2. sub 寄存器 四位立即数，其功能为：寄存器 - 四位立即数 -> 寄存器，参与计算的均为2Byte数据，例：sub ax #0001 或 sub ax #1234  
3. sub 寄存器 八位立即数，其功能为：寄存器 - 八位立即数 -> 寄存器，参与计算的均为4Byte数据，例：sub ax #00000001 或 sub ax #12345678
4. sub 寄存器A 寄存器B，其功能为：寄存器A - 寄存器B -> 寄存器A，参与计算的均为1Byte数据，例：sub ax bx
5. subh 寄存器A 寄存器B，其功能为：寄存器A - 寄存器B -> 寄存器A，参与计算的均为2Byte数据，例：subh ax bx
6. subw 寄存器A 寄存器B，其功能为：寄存器A - 寄存器B -> 寄存器A，参与计算的均为4Byte数据，例：subw ax bx

###乘法指令
该指令影响psw
需要注意的是，乘法指令往往能容纳结果的存储区域是算元的两倍，因此乘法指令的结果的低位存储在目标寄存器中，高位存储在与目标寄存器相邻的下一组寄存器中。
乘法指令包含六种形式。分别以及对应的操作为：

1. mul 寄存器 两位立即数，其功能为: 寄存器 * 两位立即数 -> 寄存器，参与计算的均为1Byte数据，例: mul ax #01 或 mul ax #fa  
2. mul 寄存器 四位立即数，其功能为：寄存器 * 四位立即数 -> 寄存器，参与计算的均为2Byte数据，例：mul ax #0001 或 mul ax #1234  
3. mul 寄存器 八位立即数，其功能为：寄存器 * 八位立即数 -> 寄存器，参与计算的均为4Byte数据，例：mul ax #00000001 或 mul ax #12345678
4. mul 寄存器A 寄存器B，其功能为：寄存器A * 寄存器B -> 寄存器A，参与计算的均为1Byte数据，例：mul ax bx
5. mulh 寄存器A 寄存器B，其功能为：寄存器A * 寄存器B -> 寄存器A，参与计算的均为2Byte数据，例：mulh ax bx
6. mulw 寄存器A 寄存器B，其功能为：寄存器A * 寄存器B -> 寄存器A，参与计算的均为4Byte数据，例：mulw ax bx

###除法指令
该指令影响psw
需要注意的是，除法指令往往会得到商与余数两部分，因此除法指令的结果，商值存储在目标寄存器中，而余数则存储在与目标寄存器相邻的下一组寄存器中。
除法指令包含六种形式。分别以及对应的操作为：

1. div 寄存器 两位立即数，其功能为: 寄存器 * 两位立即数 -> 寄存器，参与计算的均为1Byte数据，例: div ax #01 或 div ax #fa  
2. div 寄存器 四位立即数，其功能为：寄存器 * 四位立即数 -> 寄存器，参与计算的均为2Byte数据，例：div ax #0001 或 dix ax #1234  
3. div 寄存器 八位立即数，其功能为：寄存器 * 八位立即数 -> 寄存器，参与计算的均为4Byte数据，例：div ax #00000001 或 div ax #12345678
4. div 寄存器A 寄存器B，其功能为：寄存器A * 寄存器B -> 寄存器A，参与计算的均为1Byte数据，例：div ax bx
5. divh 寄存器A 寄存器B，其功能为：寄存器A * 寄存器B -> 寄存器A，参与计算的均为2Byte数据，例：divh ax bx
6. divw 寄存器A 寄存器B，其功能为：寄存器A * 寄存器B -> 寄存器A，参与计算的均为4Byte数据，例：divw ax bx

###算数移动指令
该指令影响psw
####算数左移指令
1. asl 寄存器，其功能为将1Byte寄存器中的数据左移一位。
2. aslh 寄存器，其功能为将2Byte寄存器中的数据左移一位。
3. aslw 寄存器，其功能为将4Byte寄存器中的数据左移一位。
4. asl 寄存器 两位立即数，其功能为将1Byte寄存器中的数据左移立即数所表示的次数。
5. aslh 寄存器 两位立即数，其功能为将2Byte寄存器中的数据左移立即数所表示的次数。
6. aslw 寄存器 两位立即数，其功能为将4Byte寄存器中的数据左移立即数所表示的次数。
7. asl 寄存器A 寄存器B，其功能为将1Byte寄存器A中的数据左移寄存器B中所表示的次数。
8. asl 寄存器A 寄存器B，其功能为将1Byte寄存器A中的数据左移寄存器B中所表示的次数。
9. asl 寄存器A 寄存器B，其功能为将1Byte寄存器A中的数据左移寄存器B中所表示的次数。

####算数右移指令
1. asr 寄存器，其功能为将1Byte寄存器中的数据右移一位。
2. asrh 寄存器，其功能为将2Byte寄存器中的数据右移一位。
3. asrw 寄存器，其功能为将4Byte寄存器中的数据右移一位。
4. asr 寄存器 两位立即数，其功能为将1Byte寄存器中的数据右移立即数所表示的次数。
5. asrh 寄存器 两位立即数，其功能为将2Byte寄存器中的数据右移立即数所表示的次数。
6. asrw 寄存器 两位立即数，其功能为将4Byte寄存器中的数据右移立即数所表示的次数。
7. asr 寄存器A 寄存器B，其功能为将1Byte寄存器A中的数据右移寄存器B中所表示的次数。
8. asr 寄存器A 寄存器B，其功能为将1Byte寄存器A中的数据右移寄存器B中所表示的次数。
9. asr 寄存器A 寄存器B，其功能为将1Byte寄存器A中的数据右移寄存器B中所表示的次数。

##逻辑指令
该指令影响psw
###与命令
1. and 寄存器A 寄存器B，其功能为将两个1Byte寄存器按位与操作，结果存储在寄存器A中
2. andh 寄存器A 寄存器B，其功能为将两个2Byte寄存器按位与操作，结果存储在寄存器A中
3. andw 寄存器A 寄存器B，其功能为将两个4Byte寄存器按位与操作，结果存储在寄存器A中
4. and 寄存器A 两位立即数，其功能为将1Byte寄存器与立即数按位与操作，结果存储在寄存器A中
5. andh 寄存器A 四位立即数，其功能为将2Byte寄存器与立即数按位与操作，结果存储在寄存器A中
6. andw 寄存器A 八位立即数，其功能为将4Byte寄存器与立即数按位与操作，结果存储在寄存器A中
###或命令
1. or 寄存器A 寄存器B，其功能为将两个1Byte寄存器按位或操作，结果存储在寄存器A中
2. orh 寄存器A 寄存器B，其功能为将两个2Byte寄存器按位或操作，结果存储在寄存器A中
3. orw 寄存器A 寄存器B，其功能为将两个4Byte寄存器按位或操作，结果存储在寄存器A中
4. or 寄存器A 两位立即数，其功能为将1Byte寄存器与立即数按位或操作，结果存储在寄存器A中
5. orh 寄存器A 四位立即数，其功能为将2Byte寄存器与立即数按位或操作，结果存储在寄存器A中
6. orw 寄存器A 八位立即数，其功能为将4Byte寄存器与立即数按位或操作，结果存储在寄存器A中
###异或命令
1. xor 寄存器A 寄存器B，其功能为将两个1Byte寄存器按位异或操作，结果存储在寄存器A中
2. xorh 寄存器A 寄存器B，其功能为将两个2Byte寄存器按位异或操作，结果存储在寄存器A中
3. xorw 寄存器A 寄存器B，其功能为将两个4Byte寄存器按位异或操作，结果存储在寄存器A中
4. xor 寄存器A 两位立即数，其功能为将1Byte寄存器与立即数按位异或操作，结果存储在寄存器A中
5. xorh 寄存器A 四位立即数，其功能为将2Byte寄存器与立即数按位异或操作，结果存储在寄存器A中
6. xorw 寄存器A 八位立即数，其功能为将4Byte寄存器与立即数按位异或操作，结果存储在寄存器A中

##跳转指令
该指令影响pc值。在本游戏中，跳转指令可控制程序计数器产生变化，但玩家并不直接给出其地址数，而是通过定义标签的方式来实现（考虑是否可以实现寄存器跳转），标签的的规则有特殊的限定，要求不能与既有的寄存器名称重复，以字母开头，由字母与数字组成，其后缀为冒号“:”。 譬如 loop: 、 start: 。 标签独占一行，用于代表紧随标签的下一条指令的地址。

1. jmp 标签，其功能为无条件跳转到标签下的指令
2. jnz 标签，其功能为，根据最近的一次计算，如果结果值不为0，则跳转到标签下的指令，否则忽略该指令
3. jz 标签，其功能为，根据最近一次计算，如果结果值为0，则跳转到标签下的指令，否则忽略该指令

##数据移动指令
1. mov 寄存器A 寄存器B，其功能为把寄存器B中的1Byte数据移动到寄存器A中（寄存器B中的数据不变）
2. movh 寄存器A 寄存器B，其功能为把寄存器B中的2Byte数据移动到寄存器A中（寄存器B中的数据不变）
3. movw 寄存器A 寄存器B，其功能为把寄存器B中的4Byte数据移动到寄存器A中（寄存器B中的数据不变）
4. mov 寄存器A 两位立即数，其功能为把立即数中的1Byte数据移动到寄存器A中
5. mov 寄存器A 四位立即数，其功能为把立即数中的2Byte数据移动到寄存器A中
6. mov 寄存器A 八位立即数，其功能为把立即数中的4Byte数据移动到寄存器A中
7. mov 寄存器 input，其功能为把当前测试对中的1Byte输入数据移动到寄存器中
8. movh 寄存器 input，其功能为把当前测试对中的2Byte输入数据移动到寄存A中
9. movw 寄存器 input，其功能为把当前测试对中的4Byte输入数据移动到寄存器中
10. mov output 寄存器，其功能为把寄存器中的1Byte数据作为本次算法执行后的结果输出到测试对中
11. movh output 寄存器，其功能为把寄存器中的2Byte数据作为本次算法执行后的结果输出到测试对中
12. movw output 寄存器，其功能为把寄存器中的4Byte数据作为本次算法执行后的结果输出到测试对中

##内存操作
###读操作
1. load 寄存器 八位立即数，其功能为读取八位立即数所表示的内存地址中的数值，并将该1Byte数值读入到寄存器中
2. loadh 寄存器 八位立即数，其功能为读取八位立即数所表示的内存地址中的数值，并将该2Byte数值读入到寄存器中
3. loadw 寄存器 八位立即数，其功能为读取八位立即数所表示的内存地址中的数值，并将该4Byte数值读入到寄存器中
4. load 寄存器A 寄存器B，其功能为读取寄存器B中的数据所表示的内存地址中的数值，并将该1Byte数值读入到寄存器A中
5. loadh 寄存器A 寄存器B，其功能为读取寄存器B中的数据所所表示的内存地址中的数值，并将该2Byte数值读入到寄存器A中
6. loadw 寄存器A 寄存器B，其功能为读取寄存器B中的数据所所表示的内存地址中的数值，并将该4Byte数值读入到寄存器A中

###写操作
1. store 寄存器 八位立即数，将寄存器中1Byte数据写入到八位立即数所表示的内存地址中
2. storeh 寄存器 八位立即数，将寄存器中2Byte数据写入到八位立即数所表示的内存地址中
3. storew 寄存器 八位立即数，将寄存器中4Byte数据写入到八位立即数所表示的内存地址中
4. store 寄存器A 寄存器B，将寄存器A中1Byte数据写入到寄存器B中的数据所表示的内存地址中
5. storeh 寄存器A 寄存器B，将寄存器A中2Byte数据写入到寄存器B中的数据所表示的内存地址中
6. storew 寄存器A 寄存器B，将寄存器A中4Byte数据写入到寄存器B中的数据所表示的内存地址中

###内存栈操作
1. push 寄存器 将寄存器中1Byte数据写入到栈内
2. pushh 寄存器 将寄存器中2Byte数据写入到栈内
3. pushh 寄存器 将寄存器中4Byte数据写入到栈内
1. pop 寄存器 将取出栈顶1Byte数据到寄存器中
2. poph 寄存器 将取出栈顶2Byte数据到寄存器中
3. poph 寄存器 将取出栈顶4Byte数据到寄存器中